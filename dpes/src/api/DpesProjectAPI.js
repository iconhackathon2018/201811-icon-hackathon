import iconService from '../sdk/IconService';
import Builder from '../sdk/Builder';
import IconexConnectAPI from './IconexConnectAPI';

const getMessageList = async (projectAddress, userAddress) => {
  const call = Builder.call({
    to: projectAddress,
    methodName: 'get_message_list',
    params: {
      _user_address: userAddress,
    },
  });
  const result = await iconService.call(call).execute(true);
  return result;
};

const getReviewResult = async ({
  projectAddress,
  userAddress,
}) => {
  const call = Builder.call({
    to: projectAddress,
    methodName: 'get_review_result',
    params: {
      _user_address: userAddress,
    },
  });
  const result = await iconService.call(call).execute(true);
  return result;
};

const getProjectInfo = async (projectAddress) => {
  const call = Builder.call({
    to: projectAddress,
    methodName: 'get_project_info',
  });
  const result = await iconService.call(call).execute(true);
  return result;
};

const createProject = async ({
  adminAddress,
  params,
}) => {
  const projectContent = '504b03040a0000000000efb3764d00000000000000000000000013001000647065735f70726f6a6563745f73636f72652f55580c005d6ef75bb2aff65bf5011400504b03040a0000000000efb3764d0000000000000000000000001e001000647065735f70726f6a6563745f73636f72652f5f5f696e69745f5f2e707955580c00fa6bf75bb2aff65bf5011400504b0304140008000800e05b774d00000000000000000000000028001000647065735f70726f6a6563745f73636f72652f647065735f70726f6a6563745f73636f72652e707955580c00fa6bf75b6366f75bf5011400d55aeb6fdb4612ff2cfd159be403c544a7fa713502010aaa586a22c02f48727a3dc320687265b147910249d9f115fddf3b33fbe0924bc9f65d71c2e5434cceeefc7676769e4b2db274c5a2204d729e3d440167d16a9d66057bdf6ebf6383fff9bff6bb5694143c5bf801df8f00ed20f6f39c4d466b9e77264a96599066dcedb75b3f95e2b542be60c19207fff2826514871eff1ee54527e7f1a2cb04c50fc38ce7799f0dc583cbfef689dda5690c48ad35ac6303def342c2c5fc81c7cfc301ff6eb482fb2b2f48378990adced4b2b942d84716dd6d0aeeadb3e8df5c0ab1ced2df78505862e008ccf2fc152ed247f02e5ba4d9ca2f0a1e7a39eacef393d0bbf7a384675e1805300b9620512ed284eb0d48ed8fb32ccd3aa86f14c7f3a2242a3c4f8ab18225fd7b3a8d16527a92c0066a48b015cb2c7d2cb74cab024bc68b4d96b0dfe1b1e5705cc8e9978cad3ff666f8e884859f14a04f9e6c567b32fff9f00b28d241f3bf12e74db6efb427a7ff8081c303f6fe3d3bfcd8fe653cf9f275ee0da753a0deb45b1fbbedd649efe4e464c7df8f5b9ed5df1f7bc7c7c73bfe7e6cdfaa7567d7e724cd81329953f490337219b48cf3f1f9e7318a76d86e9d8d87237a3e6ab72ea7c3d3b3313c1f2b46b5cbc22f3639f10e4fe7936f63c13bbc1e4de682f5f4ec722639f765222b702096a79b6ccfd1b16e1d9d09182f3d7df673f4cc76cbbb189ea3b6ded2c35b208cc6b35322e00312aea6937f8ebde1f9e5f5c59c064c02715c8fbdd1702e60d40b0ecce6c3f9f58cc8e21189f3afd3f1ecebe5d988e8faed2d0a333bbd9c02fbe4542c54be12e3e57c78569f5227e2c4e9f8db64fc4b39c778c7e1f3f16c36fc6260980412e37a369ea2cb0c7fa5f1f2b544074a0d5f520880ccd1fb3a99cd2fa7bf96136df25b3df954abd77827b0d1d5782677381c8d405d42a33619673704e2f0aecff4c18ffcc2bfc3c337637abe597388e33dcd18deb92a6a7b89bfc298fdcdcf469f3b8284a682b85dca0e7a66c8f3a036136da861a699886a1ca671094ec853c61a1bee857e519748595d0307e4179e2fd338acb168cbabf068b69c024d8d475871c322227962ee028e11fc2959b4690ab6073f862d144f6b3ea0041cf275b11c1c19f2a6851fef00ac5b7c136c8996f187883f3602196e6161c069358826d36f239ae944cfc269c40dd4b39e9f65fe13e00df1af062cbdce825375556d97b26669dea774cf26d1dcb606f2372138c0120aab347b6a44b37dd882c4cad1ad41060da66e387af32196560f815c156862ef75fbb7828140d49a1291214dc0c3c1b26359b06271d5628ca18f53a9a729e8cb558a5d3ceab9d2276b544be6b2125573b46f12aba2ba664c324436e3078780067a8dd2a4a343c2a701a3e104ea4977cbe44ae40186832e73ae90c6242dca598cfa2d967ec20e9c6d6b5a9beb45391c7252647e005eedc89d225c92164c8d38d5b8dacb79d1c1876a1025323e34474c1a360976781408f2a52116d2b87e736b518f462b05574f145b8d564db30fdc1dc62aa4b1c886556ed628e85e8d729bf549d1f67b70afd029368afc3b348a891f7732ee8769123f0de6d906e154b3a97ac42859a4cff45eb84b68bd8cbd0340c725953ab8573d481a3006cd9dea49157d984872cf259ad288314998a79e22ad9526504ff8a2bdab2c1697d700320f35f5ed380b75526183e84bdcb86a997ce4c86f39584d9cfa61de69c84e3795b56e11017a70168199b2cc4fee7927e649a70aea924db6bc05de020d94783d7cf5f00a20b9af31dc44b7370e0e3bb440297c547044a0936d3992aaf569e6f79a9c37b4f8ad702401dd674443ca1f954550829ebf5ef324ec5456764bdbaa4c7ed9b9c95206c4d9c4af3938c9f77f796e6274bb703b8e4a0050706003e530baaa6ce631d6ac9ca2b41762c773a707690bc6741c12afdbecc4b40083b16200e2c41f5208bac8230e5aebd1b8ce225a9156cb0aafbcd1429d95e9e21d13ffb7b0beea3307ab34478eb4a8f2eab343d639e8b39ffd38e75d76d867d202614a9517524a9df598750ebbeca8cb8ebbecef5df6a35baea96c9d64010235de4d55851dd5d860c09a123154183284ab0a038a8be881537d513b74f49d325174b626145a704bbd23a6f6ec6b543a131785405d815828cbe312bc1dcf95874ca20bc1c8f2e9c214a49398f59b5481b8450c03e0cdc0b84cea89cb23583f86e8c133b52c5bfaa81e06d97c15e539606cabe86c072952e516b896e360551763707a22e30c1dd9c9981d1b6c6b015e2a238c9fe48f467f53869e10160ec14221bff955e7ae99af35dbcbb156052c0c36e6404340b219653c927229890f88f8c8a3fb25c6c1f2ca10c2111970b460152c0a53e80ace2d1a28b903215bd042ab4bfe1d9404c546d1b171c87f20deb1f7ece8a002427ad389c44476c53c53f11f062c839a22ec08fd57a703b6248b5dbaec074928ef29c9f45b1c5cffafd80a5e79ee792f6d3a38f4c7c67406e6dd57f1d56cc47beb0d601729b59f5692d4360cd03b615f9d5e81d14ecb9504a4d20944511925ba9a2c8282ca35e2ad2d13ceb6e59450e166b5ceeba9bbe16aa71212068c6cc038b6c64b971a8fb99e6919cd772c35664f7ffeb0b26510a739f72867ea6a5edfee6d0b76d0b1d6f3c22abf87c6228108eaca581e40e70d61fcee897a27264a80525c180e363194e912e525ad245e7bb80d9b103da5de045477229837d777cf6eef993c8a52c83dd2c26c0db982ef4e0f7f85c61a60ed5ba79bdad629cecabac4f16516223699875e0144991a58aa1753765b2f14f7013faf6c69fa8d77112dfecbc2c3f8065aad0f8c6fa3b4900e3eb6bc9f80b19cde2f8be0faa7cd8a98d60c1de72477aff1636bcf57b5e8d6e6b6e2f28d8288c4f38cd3d0572ddcfb5ebe27c1aa710a76cde82a2e09385bf16299867b12477ee6b03ca9cbf47b9fbedfebafd09434061832a8049279b19cad4f004237cf8acec2b99a8e4f2f2f20464c2e2fd8cfc3c9d978c4debc7118b0aa0fd950f42222c39a417fee56c235183f04b492520d66f43b862dd1cc60aa5d321a23f58bc64add2d3b2ec20e2076800deb9f1248f90ca8ae9046efa41ee2ad04d3d007d78b0ad50923453b5e390cd5d37f543320826c744531e4e59b95ae6809bf5a9cd300cafbf082bebd94e765cdfb43b57937b7a35a9e660659bcdcd6b874457e885667a155fa1ff9c19c4cf148e0181af9602e2de8628ea52298d9d00a919e6f34c42dd4a0753cb7ae721f1c090b19a57a51d1da2bfec00c498d5058ff0e26a5402d6e5bc5f4bde6886e5d75ca79d6e590c164d25f69eac6d79a6d265f4d99cd9bd6c9dbc8660dd733e65455269b34b7db748da3ef65302aca14c53ed9ed4eed0b82f61143534a1e7b65230a8952be2a03718b625ec0e188014c97bbf270ed1a4cc5d59d3fe392ab63ed43de6472a02fedae4e84635101b6c71c8cd54114ec3bf7fe24c45052d0a11876e297bf19933f5f93aaa7c12e3b3c71ff04504b070834a070c6d1090000ce280000504b0304140008000800efb3764d0000000000000000000000001f001000647065735f70726f6a6563745f73636f72652f7061636b6167652e6a736f6e55580c00fa6bf75bb2aff65bf5011400abe6520002a5b2d4a2e2ccfc3c252b0525033d033d43251d88786e62665e7c5a664e2a4826a520b538bea0283f2b35b924be3839bf281545194404a8ce05a82e00a22c182cc6550b00504b07083e3c49cf4900000067000000504b010215030a0000000000efb3764d00000000000000000000000013000c000000000000000040ed4100000000647065735f70726f6a6563745f73636f72652f555808005d6ef75bb2aff65b504b010215030a0000000000efb3764d0000000000000000000000001e000c000000000000000040a48141000000647065735f70726f6a6563745f73636f72652f5f5f696e69745f5f2e707955580800fa6bf75bb2aff65b504b01021503140008000800e05b774d34a070c6d1090000ce28000028000c000000000000000040a4818d000000647065735f70726f6a6563745f73636f72652f647065735f70726f6a6563745f73636f72652e707955580800fa6bf75b6366f75b504b01021503140008000800efb3764d3e3c49cf49000000670000001f000c000000000000000040a481c40a0000647065735f70726f6a6563745f73636f72652f7061636b6167652e6a736f6e55580800fa6bf75bb2aff65b504b05060000000004000400600100006a0b00000000';
  const call = Builder.deploy({
    stepLimit: '0x5a0000000',
    networkId: '0x3',
    from: adminAddress,
    params,
    content: projectContent,
  });
  const tx = await IconexConnectAPI.sendTransaction(call);
  return tx;
};

export default {
  getMessageList,
  getReviewResult,
  getProjectInfo,
  createProject,
};
